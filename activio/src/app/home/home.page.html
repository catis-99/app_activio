<ion-content [fullscreen]="true" class="home-content">
  <div class="home-container">

    <!-- Header -->
    <div class="header">
      <div class="greeting">
        <span class="greeting-text">{{ t('home.welcome') }}</span>
        <h1 class="user-name">Luna</h1>
      </div>

      <div class="header-buttons">
        <ion-button fill="clear" class="notification-btn" (click)="navigateToSettings()">
          <ion-icon name="settings-outline"></ion-icon>
        </ion-button>
        <ion-button fill="clear" class="notification-btn">
          <ion-icon name="notifications-outline"></ion-icon>
        </ion-button>
      </div>
    </div>

    <!-- Stats Cards -->
    <div class="stats-cards">
      <div class="stat-card">
        <div class="stat-header">
          <span>{{ t('home.workoutDays') }}</span>
          <ion-icon name="barbell-outline"></ion-icon>
        </div>
        <div class="stat-value">2/7</div>
      </div>

      <div class="stat-card">
        <div class="stat-header">
          <span>{{ t('home.burnedCalories') }}</span>
          <ion-icon name="flame-outline"></ion-icon>
        </div>
        <div class="stat-value">350</div>
      </div>
    </div>

    <!-- Criar Atividade -->
    <div class="create-activity-btn">
      <span class="create-activity-text">
        {{ t('home.createActivity') }}
      </span>

      <button class="add-icon" type="button" (click)="navigateToCriarAtividade()" aria-label="Criar atividade">
        <ion-icon name="add-outline"></ion-icon>
      </button>
    </div>

    <!-- Resumo de Atividade -->
    <div class="activity-summary" r>
      <h2>{{ t('home.activitySummary') }}</h2>

      <button class="month-selector" type="button" (click)="togglePeriodDropdown()">
        <span>{{ getPeriodLabel() }}</span>
        <ion-icon name="chevron-down-outline"></ion-icon>
      </button>

      <!-- Dropdown -->
      <div class="period-dropdown" *ngIf="isPeriodDropdownOpen">
        <button class="dropdown-item" type="button" (click)="selectPeriod('week')">
          <ion-icon name="calendar-outline"></ion-icon>
          <span>{{ t('home.week') }}</span>
        </button>

        <button class="dropdown-item" type="button" (click)="selectPeriod('month')">
          <ion-icon name="calendar-outline"></ion-icon>
          <span>{{ t('home.month') }}</span>
        </button>
      </div>
    </div>

    <!-- Visualização -->
    <div class="data-view">

      <!-- Gráfico Semanal -->
      <div class="weekly-chart" *ngIf="selectedPeriod === 'week'">
        <h3>{{ t('home.thisWeek') }}</h3>

        <div class="chart-container">
          <div class="chart-bars">
            <div class="bar-container" *ngFor="let minutes of weeklyData; let i = index">
              <div class="bar" [style.height.px]="minutes * 2">
                <span class="bar-value">{{ minutes }}min</span>
              </div>
              <div class="bar-label">{{ getDayName(i) }}</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Calendário Mensal -->
      <div class="calendar-section" *ngIf="selectedPeriod === 'month'">
        <ion-datetime presentation="date" [value]="selectedDate.toISOString()" (ionChange)="onDateChange($event)"
          locale="pt-PT" class="calendar-datetime">
        </ion-datetime>
      </div>

    </div>

  </div>

  <!-- Bottom Navigation -->
  <div class="bottom-nav">
    <button class="nav-btn active" type="button">
      <img src="assets/icons_nav/Home.svg" alt="Home" class="nav-icon">
      <span class="nav-dot"></span>
    </button>

    <button class="nav-btn" type="button" (click)="navigateToProgresso()">
      <img src="assets/icons_nav/Activity.svg" alt="Progresso" class="nav-icon">
    </button>

    <button class="nav-btn-fab" type="button" (click)="navigateToCriarAtividade()">
      <img src="assets/icons_nav/plus.svg" alt="Adicionar" class="nav-icon-plus">
    </button>

    <button class="nav-btn" type="button" (click)="navigateToListaAtividades()">
      <img src="assets/icons_nav/Icon-Activity.svg" alt="Lista de Atividades" class="nav-icon">
    </button>

    <button class="nav-btn" type="button" (click)="navigateToProfile()">
      <img src="assets/icons_nav/Profile.svg" alt="Perfil" class="nav-icon">
    </button>
  </div>

</ion-content>